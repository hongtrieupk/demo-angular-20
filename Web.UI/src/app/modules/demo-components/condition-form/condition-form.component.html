<div class="condition-form">
    <form [formGroup]="conditionForm" novalidate>
        <div class="flex-container">
            <div class="col-4 flex-container">
                <button mat-button class="menu-button">
                    <mat-icon class="icon">menu</mat-icon>
                </button>
                <app-single-picklist [datasource]="fields" [isRequired]="true" [singleSelectControl]="fieldControl"
                    [selectedItem]="selectedOptionField" (changeItem)="onChangeFieldOption($event)">
                </app-single-picklist>
            </div>
            <div class="col-2">
                <div [class]="operatorControl.hasError('required') ? 'input-wrapper has-error' : 'input-wrapper'">
                    <mat-form-field appearance="fill" class="full-width">
                        <mat-select [formControl]="operatorControl" #operatorMatSelect
                            (selectionChange)="onChangeOperator($event.value)"
                            matTooltip="{{condition.operatorDisplay }}"
                            placeholder="select an item">
                            <mat-option *ngFor="let operator of operatorOptions" [value]="operator">
                                {{operator.value}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
            </div>
            <div class="col-6 flex-container">
                <div class="novalue-placeholder">
                    <div *ngIf="isSingleValueCondition() || isMultipleValueCondition()"
                        class="full-width novalue-placeholder">
                        <ng-container *ngTemplateOutlet="valueInputField; context:{ formControlName: valueControl}">
                        </ng-container>
                    </div>
                    <div *ngIf="isBetweenCondition()" class="full-width flex-container novalue-placeholder">
                        <ng-container *ngTemplateOutlet="valueInputField; context:{ formControlName: fromValueControl}">
                        </ng-container>
                        <ng-container *ngTemplateOutlet="valueInputField; context:{ formControlName: toValueControl}">
                        </ng-container>
                    </div>
                </div>
                <button class="delete-button" (click)="onDelete()">                    
                    <i aria-hidden="true" class="fa fa-trash"></i>
                </button>
                <mat-icon class="add-button" (click)="onAddNew()">add_circle_outline</mat-icon>
            </div>
        </div>
    </form>
    <div class="flex-container">
        <div class="col-6"></div>
        <div class="col-6">
            <!-- <em class="error-date-time"
                *ngIf="condition?.hasInValidDateTimeRange()">{{'condition.message.error.date.range' | translate}}</em>
            <em class="error-date-time" *ngIf="hasInvalidDates()">{{'condition.message.error.date.format' |
                translate}}</em> -->
        </div>
    </div>
</div>

<ng-template #valueInputField let-formControlName="formControlName" let-placeholder="placeholder">
    <div *ngIf="isDropdownList()">
        <app-single-picklist [datasource]="valueOptions" [isRequired]="true" [singleSelectControl]="formControlName"
            [selectedItem]="selectedValueForDropDown" *ngIf="!isMultipleValueCondition()">
        </app-single-picklist>
        <app-form-multiple-picklist [datasource]="valueOptions" [selectedValues]="condition.values" [isRequired]="true"
            [multipleSelectControl]="formControlName" *ngIf="isMultipleValueCondition()">
        </app-form-multiple-picklist>
    </div>
    <div [class]="getValueFieldWrapperClass(formControlName)" *ngIf="isFreeInput()">
        <mat-form-field appearance="fill" class="full-width">
            <input matInput [formControl]="formControlName" [type]="isNumberInput() ? 'number' : 'text'">
        </mat-form-field>
    </div>
    <div [class]="getValueFieldWrapperClass(formControlName)" *ngIf="isDateTimeInput()">
        <mat-form-field appearance="fill" class="full-width">
            <input matInput [matDatepicker]="picker" [formControl]="formControlName">
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>
    </div>
</ng-template>